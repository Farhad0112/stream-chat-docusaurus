import AttachmentsScreenshot from "../assets/attachments-screenshot.png";
import ImageSizingScreenshot1 from "../assets/image-sizing-screenshot-1.png";
import ImageSizingScreenshot2 from "../assets/image-sizing-screenshot-2.png";
import ImageSizingScreenshot3 from "../assets/image-sizing-screenshot-3.png";

The `AttachmentList` component displays the attachments of a message. The following attachments are supported:

- Images (including GIFs) are displayed inline
- Videos are displayed inline
- Other files can be downloaded
- Links in a message are enriched with built-in open graph URL scraping

**Example 1** - different type of attachments:

<img src={AttachmentsScreenshot} width="500" />

## Basic Usage

A typical use case for the `AttachmentList` component would be to use in your custom components that will completely override the message component.

**Example 1** - a basic example:

```typescript
@Component({
  selector: "app-custom-message",
  template: `
    <stream-attachment-list
      *ngIf="hasAttachment"
      [attachments]="message.attachments"
    ></stream-attachment-list>
    <!-- Other parts of the custom message component -->
  `,
})
export class CustomMessageComponent {
  @Input() message: StreamMessage;
  hasAttachment: boolean;
}
```

## Customization

You can use the [`AttachmentConfigurationService`](../services/AttachmentConfigurationService.mdx) to override certain attributes of attachments.

You can provide your own attachment list component by the [`CustomTemplatesService`](../services/CustomTemplatesService.mdx)

### Image and video sizing

The following section details how the width and height of images and videos uploaded from files are computed.

#### Maximum size

You can control the maximum size of images and videos with the [`--str-chat__attachment-max-width`](../theming/component-variables.mdx) CSS variable (available only in [theme-v2](../theming/introduction.mdx)). The value of this variable must be a value that can be computed to a valid pixel value using the [`getComputedStyle`](https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle) method (for example: `300px`, `10rem`, `calc(300px - var(--margin))`, but not `100%`). If you provide an invalid value, the image and video sizing can break, which can lead to scrolling issues inside the message list (for example the message list isn't scrolled to the bottom when you open a channel).

:::tip
If you're unsure about the value you provided for `--str-chat__attachment-max-width`, send an image/video to a channel, then inspect the `img`/`video` element inside the message list using your browser's development tools. Inside the **computed** properties of the element, you should see that `max-height` and `max-width` are set to a valid pixel value.
:::

#### File size optimization + custom CDN

:::important
The following description gives a deeper understanding of the SDKs inner workings, you only need to understand this **if you're using your own CDN**.
:::

Based on the CSS settings provided for images and videos, the SDK will load an image (or thumbnail image in case of a video file) with a reduced file size while still providing sufficient image quality for the given dimensions. This will result in less network traffic and faster image load for users.

The file size reduction is made by Stream's CDN. If you're using your own CDN you'll likely have to provide your own implementation for file size reduction, you can do this using the [`AttachmentConfigurationService`](../services/AttachmentConfigurationService.mdx).

#### File size optimization + custom CSS code

:::important
The following description gives a deeper understanding of the SDK's inner workings, you only need to understand this **if you're planning to override attachment sizing with your own CSS code**.
:::

Based on the CSS settings provided for images and videos, the SDK will load an image (or thumbnail image in case of a video file) with a reduced file size while still providing sufficient image quality for the given dimensions. This will result in less network traffic and faster image load for users.

The SDK does this by reading the `height`/`max-height` and `max-width` properties of the host element of an image or video (usually an `img` or `video` element). If these properties are not provided, the file size reduction will be turned off.

#### Aspect ratio

:::important
The following description gives a deeper understanding of the SDK's inner workings,you only need to understand this **if you're planning to override attachment sizing with your own CSS code**.
:::

The SDK will try to display images and videos with their original aspect ratio. This is done by setting the `height` property on the host element (usually an `img` or `video` element). The following logic is implemented by the [`AttachmentConfigurationService`](../services/AttachmentConfigurationService.mdx) and can be overridden.

:::note
The SDK will only set the `height` property on an element if `max-height` property is provided and can be computed to a valid pixel value using the [`getComputedStyle`](https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle) method (for example: `300px`, `10rem`, `calc(300px - var(--margin))`, but not `100%`).
:::

However original aspect ratio isn't always guaranteed. Two notable exceptions are:

1. if a message contains multiple lines of texts and/or multiple attachments, the image/video might be stretched to it's `max-width`

**Example 1** - message with one line of text

<img src={ImageSizingScreenshot1} width="200" />

**Example 2** - message with multiple lines of text

<img src={ImageSizingScreenshot2} width="200" />

2. in Safari, images with portrait orientation are stretched to `max-width`

**Example 3** - portrait images in Safari

<img src={ImageSizingScreenshot3} width="200" />

[//]: # "Start of generated content"
## Inputs and outputs 


### messageId

• **messageId**: `undefined` \| `string`

The id of the message the attachments belong to

#### Defined in

[lib/attachment-list/attachment-list.component.ts:36](https://github.com/GetStream/stream-chat-angular/blob/4cf40da/projects/stream-chat-angular/src/lib/attachment-list/attachment-list.component.ts#L36)

___

### parentMessageId

• **parentMessageId**: `undefined` \| `string`

The parent id of the message the attachments belong to

#### Defined in

[lib/attachment-list/attachment-list.component.ts:40](https://github.com/GetStream/stream-chat-angular/blob/4cf40da/projects/stream-chat-angular/src/lib/attachment-list/attachment-list.component.ts#L40)

___

### attachments

• **attachments**: `Attachment`<`DefaultStreamChatGenerics`\>[] = `[]`

The attachments to display

#### Defined in

[lib/attachment-list/attachment-list.component.ts:44](https://github.com/GetStream/stream-chat-angular/blob/4cf40da/projects/stream-chat-angular/src/lib/attachment-list/attachment-list.component.ts#L44)

[//]: # "End of generated content"
